---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import ModalComp from '../../global/modal/ModalComp';
import IconPlay from '../../../assets/icons/IconPlay.astro';

interface Props {
  title: string
  src: ImageMetadata
  video: string
}

const { title, video, src } = Astro.props;
---

<div class="client-card-container fadeIn">
  <ModalComp
    style={{
      width: "100%",
      height: 200,
      border: 0,
      backgroundColor: "transparent"
    }} 
    client:only
    width={800}
    title={title}
  >
    <div class="image-container" slot="content">
      <Image class="image" alt="client-logo" src={src} />
      <div class="overlap">
        <div>
          <IconPlay />
        </div>
      </div>
    </div>
    <video slot="modalContent" controls src={video} autoplay></video>
  </ModalComp>
</div>

<style>
  .client-card-container {
    width: 100%;
    height: 100%;
  }

  .image-container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s;
    position: relative;
  }

  .image-container:hover {
    opacity: 0.7;
  }

  .image {
    width: 60%;
    height: auto;
    object-fit: cover;
    border-radius: 16px;
  }

  button:hover {
    opacity: 0.7;
  }

  video {
    width: 100%;
    max-height: 78vh;
    background-color: black;
  }

  .overlap {
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .overlap > div {
    width: 48px;
    aspect-ratio: 1;
    color: white;
    padding: 12px;
    background-color: var(--primary-600);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>